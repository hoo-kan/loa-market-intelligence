# 데이터 규모 및 구조 (Data Volume & Architecture)

## 📊 개요 (Overview)

본 프로젝트는 **Google Sheets를 NoSQL 데이터베이스처럼 활용**하는 대규모 데이터 처리 시스템입니다.
Google Sheets의 물리적 한계(셀 1,000만 개) 내에서 **1억 셀 이상**의 시계열 데이터를 효율적으로 관리하기 위해 **분산 저장(Sharding)** 및 **계층적 통합(Hierarchical Aggregation)** 전략을 사용합니다.

---

## 🎯 핵심 지표 (Key Metrics)

- **총 데이터 규모**: **약 1.1억 셀(112M Cells)** 이상
- **일일 수집량**: 분 단위 실시간 수집 (1분/5분 주기)
- **운영 기간**: 2024.07 ~ 현재 (약 6개월+)
- **저장 전략**: 분산 파일 시스템(Sharding)으로 단일 시트 한계 우회

---

## 🏗️ 데이터 아키텍처 (Data Architecture)

### 1. 마스터 레이어 (Master Layer)

각 마스터 파일은 기간별 로우 데이터의 집계 탭(평균가: 일별, 시간별)을 모두 통합하여 서비스에서 직접 참조하는 최종 데이터입니다.

| 카테고리(마스터)  | 전체 열(품목수) | 전체 행(일간) | 참조 중인 파일 수 | 비고        |
| :---------------- | :-------------- | :------------ | :---------------- | :---------- |
| **강화재료**      | 112개           | 1,508일+      | 9개 파일          | 핵심 지표   |
| **각인서**        | 43개            | 570일+        | 3개 파일          | 고가 아이템 |
| **보석**          | 12개            | 1,508일+      | 4개 파일          | 프리미엄    |
| **생활&항해**     | 39개            | 1,506일+      | 6개 파일          | 생활 컨텐츠 |
| **요리&전투용품** | 76개            | 1,506일+      | 6개 파일          | 소모품      |

**총 5개 대분류 마스터 시트**, 총 28개 로우 데이터 파일 참조

---

### 2. 로우 데이터 레이어 (Raw Data Layer)

#### 2.1 현재 가동 중인 워커 (Active Workers)

가장 최근의 로우 데이터 파일만 **트리거(5분) 작동 중**입니다.

| 로우 데이터 - 분류(기간)         | 전체 열(품목수) | 전체 행(5분) | 트리거 상태            |
| :------------------------------- | :-------------- | :----------- | :--------------------- |
| 강화재료(26.01.01-26.06.30)      | 112개           | 7,377행      | 🟢 트리거(5분) 작동 중 |
| 각인서(26.01.01-26.06.30)        | 43개            | 7,380행      | 🟢 트리거(5분) 작동 중 |
| 보석(26.01.01-26.06.30)          | 12개            | 7,410행      | 🟢 트리거(5분) 작동 중 |
| 생활&항해(26.01.01-26.06.30)     | 39개            | 7,384행      | 🟢 트리거(5분) 작동 중 |
| 요리&전투용품(26.01.01-26.06.30) | 76개            | 7,382행      | 🟢 트리거(5분) 작동 중 |

**현재 7개 워커 가동 중** (5개 분류 × 5분 주기 + 2개 분류 × 1분 주기)

#### 2.2 고빈도 수집 워커 (High-Frequency Workers)

변동성이 큰 **강화재료**, **각인서**의 경우 **트리거(1분) 추가 작동 중**입니다.

| 로우 데이터 - 분류(기간)    | 전체 열(품목수) | 전체 행(1분) | 트리거 상태            |
| :-------------------------- | :-------------- | :----------- | :--------------------- |
| 강화재료(26.01.01-26.02.28) | 112개           | 36,095행     | 🟢 트리거(1분) 작동 중 |
| 각인서(26.01.01-26.02.28)   | 43개            | 75,903행     | 🟢 트리거(1분) 작동 중 |

#### 2.3 아카이브 데이터 (Archived Data)

과거 기간별 로우 데이터 파일들은 **트리거 중지** 상태이며, 마스터 시트에 정적 값으로 통합되어 있습니다.

**강화재료 아카이브** (총 8개 파일):

- 21.12.06-22.06.30: 56,198행 (트리거 중지)
- 22.07.01-22.12.31: 52,993행 (트리거 중지)
- 23.01.01-23.06.30: 52,129행 (트리거 중지)
- 23.07.01-23.12.31: 52,993행 (트리거 중지)
- 24.01.01-24.06.30: 52,412행 (트리거 중지)
- 24.07.01-24.12.31: 52,868행 (트리거 중지)
- 25.01.01-25.06.30: 50,916행 (트리거 중지)
- 25.07.01-25.12.31: 51,411행 (트리거 중지)

**각인서 아카이브** (총 2개 파일):

- 24.07.10-25.06.19: 97,870행 (트리거 중지)
- 25.06.20-25.12.31: 54,487행 (트리거 중지)

**보석 아카이브** (총 3개 파일):

- 21.12.06-23.12.31: 214,310행 (트리거 중지)
- 24.01.01-25.06.23: 154,383행 (트리거 중지)
- 25.06.24-25.12.31: 53,879행 (트리거 중지)

**생활&항해 아카이브** (총 5개 파일):

- 21.12.06-22.12.31: 109,190행 (트리거 중지)
- 23.01.01-23.12.31: 105,121행 (트리거 중지)
- 24.01.01-24.12.31: 105,276행 (트리거 중지)
- 25.01.01-25.06.30: 50,924행 (트리거 중지)
- 25.07.01-25.12.31: 51,768행 (트리거 중지)

**요리&전투용품 아카이브** (총 5개 파일):

- 21.12.06-22.12.31: 109,190행 (트리거 중지)
- 23.01.01-23.12.31: 105,121행 (트리거 중지)
- 24.01.01-24.12.31: 105,276행 (트리거 중지)
- 25.01.01-25.06.30: 50,928행 (트리거 중지)
- 25.07.01-25.12.31: 51,825행 (트리거 중지)

**1분 주기 아카이브** (총 5개 파일):

- 강화재료(25.08.01-25.08.31): 42,684행 (트리거 중지)
- 강화재료(25.09.01-25.10.31): 78,383행 (트리거 중지)
- 강화재료(25.11.01-25.12.31): 85,433행 (트리거 중지)
- 각인서(25.07.14-25.09.30): 107,828행 (트리거 중지)
- 각인서(25.10.01-25.12.31): 124,430행 (트리거 중지)

---

## 💡 기술적 시사점 (Technical Insights)

### 1. 용량 최적화 (Capacity Optimization)

- **문제**: Google Sheets 단일 파일 한계 (1,000만 셀)
- **해결**: 기간별 파일 분산(Sharding)으로 200만 행 이상 데이터 처리
- **효과**: 시스템 붕괴 방지 및 안정적 운영

### 2. 비용 효율성 (Cost Efficiency)

- **문제**: 유료 DB 사용 시 비용 발생
- **해결**: Google Sheets만으로 엔터프라이즈급 데이터 파이프라인 구축
- **효과**: **Zero Cost** 달성

### 3. 확장성 (Scalability)

- **문제**: 데이터 증가 시 시스템 확장 필요
- **해결**: 새로운 연도/분기 파일만 추가하면 되는 유연한 구조
- **효과**: 코드 수정 없이 무한 확장 가능

### 4. 성능 최적화 (Performance Optimization)

- **문제**: 대량 데이터로 인한 시트 로딩 지연
- **해결**: Hybrid Data 전략 (과거=정적 값, 최신=동적 수식)
- **효과**: 1억 셀 이상 환경에서도 빠른 응답 속도

---

## 📈 데이터 성장 추이

- **2021.12**: 프로젝트 시작 (강화재료 84개 품목)
- **2024.07**: 서비스 공개 (5개 분류 확장)
- **2025.01**: 품목 확대 (강화재료 118개로 증가)
- **2026.01**: 현재 1.1억 셀 이상 운영 중

**연평균 성장률**: 약 40% (품목 수 및 데이터 기간 증가)

---

## 🎯 결론

본 프로젝트는 **"제약을 창의성으로 극복한 사례"**입니다.

- ✅ 유료 DB 없이 무료 도구만으로 대규모 데이터 처리
- ✅ 1억 셀 이상의 데이터를 안정적으로 관리
- ✅ 24시간 무중단 자동 수집 시스템 구축
- ✅ 확장 가능한 아키텍처 설계

**엑셀(Google Sheets)의 한계를 뛰어넘은 데이터 엔지니어링 경험**을 증명합니다.
